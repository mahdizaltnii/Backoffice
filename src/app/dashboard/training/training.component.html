
<div *ngIf="editFormVisible">
  <div class="add-form">
    
    <form>
      <h2>Add New Training</h2>
      <div >
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name" [(ngModel)]="newTraining.name" [ngModelOptions]="{ standalone: true } "  required>
      </div>
      <div >
        <label for="start_date">Start Date</label>
        <input type="date" class="form-control" id="start_date" [(ngModel)]="newTraining.start_date" [ngModelOptions]="{ standalone: true }"   required>
      </div>
      <div >
        <label for="end_date">End Date</label>
        <input type="date" class="form-control" id="end_date" [(ngModel)]="newTraining.end_date" [ngModelOptions]="{ standalone: true }"   required>
      </div>
      <div >
        <label for="cost">Cost</label>
        <input type="text" class="form-control" id="cost" [(ngModel)]="newTraining.cost" [ngModelOptions]="{ standalone: true }"    required>
      </div>

      <div style="display: flex; justify-content: center; margin-top:-20px;">
        <button class="btn btn-primary" (click)="addTraining(newTraining)">Submit</button>
        <button class="btn  btn-close" (click)="hideAddValues()">Cancel</button>
      </div>
    </form>
  </div>
  
</div>

<div class="container scrollable-container">
  <div *ngIf="!isSubmitted">

    <div class="row">
      <div class="col-md-6" *ngFor="let training of listTrainings">
        <div class="card">
          <img [src]="training.imageDataUrl" alt="Training Image" class="card-img-top">
          <div class="card-body">
            <a style="text-align: center; ">
              <h5 class="card-title">{{training.name}}</h5>
              <p></p>
              <p class="card-text">Start Date: {{training.start_date}}</p>
              <p class="card-text">End Date: {{training.end_date}}</p>
              <p class="card-text">Cost: {{training.cost}}</p>
              <p class="card-text">Period: {{training.period}}  days</p>
            </a>
            <a href="javascript:void(0)" (click)="getMoreDetails(training.id)"  style="margin-left : 20px; font-size: medium;" >
              Show more details
            </a>
            <div>
              <button class="btn btn-info btn-sm btn-square rounded-pill" (click)="editTraining(training)">
                <span class="btn-icon icofont-ui-edit"></span>
              </button>
              <button class="btn btn-error btn-sm btn-square rounded-pill" (click)="deleteTraining(training.id)">
                <span class="btn-icon icofont-ui-delete"></span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
</div>




<div *ngIf="isSubmitted">
  <div class="row">
    <div class="select-wrapper">
      <select class="custom-select form-select" aria-label="Select Quizz" [(ngModel)]="selectedQuizz" (change)="showQuizzDetails()">
        <option selected>Open this select menu</option>
        <option *ngFor="let quizz of listQuizzs" [ngValue]="quizz">{{ quizz.title }}</option>
      </select>
      <span class="custom-select-arrow"></span>
    </div>
  </div>
  
    <div *ngIf="selectedQuizz">
     
          <h3  class="h3">{{ selectedQuizz.title }}</h3>
          <p   class="p">   Training Name :    {{ selectedQuizz.training_name }}</p>
          <p class="p">Description :      {{ selectedQuizz.description }}</p>
          <h3    class="h3">Questions :</h3>

          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">QUESTION</th>
                <th scope="col">PROPOSITION TEXT:</th>
                <th scope="col">CORRECT OR NOT</th>
                <th scope="col">ACTIONS</th>

              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let q of selectedQuizz.quest_quizs">
                <td>
                  <p style="font-size: larger;">{{ q.question }}</p>
                </td>
                <td>
                  <table>
                    <tbody>
                      <tr *ngFor="let p of q.propositions">
                        <td>
                          <p>{{ p.suggest }}</p>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </td>
                <td>
                  <table>
                    <tbody>
                      <tr *ngFor="let p of q.propositions">
                        <td>
                          <p>{{ p.is_correct_answer }}</p>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </td>
                <td>
                  <div >
                    <button class="btn btn-info btn-sm btn-square rounded-pill"  >
                      <span class="btn-icon icofont-ui-edit"></span>
                    </button>
                    <button  class="btn btn-error btn-sm btn-square rounded-pill" >
                      <span class="btn-icon icofont-ui-delete"></span>
                    </button>
                  </div>
                </td>

              </tr>
            

             
              <tr >
                <td>
                  <input type="text" name="question" [(ngModel)]="newQuestion.question" [ngModelOptions]="{ standalone: true }" required>
                </td>
                <td>
                  <table>
                    <tbody>
                      <td>
                        <p><input type="text" [(ngModel)]="proposition1.suggest" [ngModelOptions]="{ standalone: true }" required></p>
                        <p><input type="text" [(ngModel)]="proposition2.suggest" [ngModelOptions]="{ standalone: true }" required></p>
                        <p><input type="text" [(ngModel)]="proposition3.suggest" [ngModelOptions]="{ standalone: true }" required></p>
                      </td>
                    </tbody>
                  </table>
                </td>
                <td>
                  <table>
                    <tbody>
                      <td>
                        <p><select [(ngModel)]="proposition1.is_correct_answer" [ngModelOptions]="{ standalone: true }" (ngModelChange)="updatePropositions(1)" required>
                          <option [ngValue]="1">True</option>
                          <option [ngValue]="0">False</option>
                        </select></p>
                        <p><select [(ngModel)]="proposition2.is_correct_answer" [ngModelOptions]="{ standalone: true }" (ngModelChange)="updatePropositions(2)" required>
                          <option [ngValue]="1">True</option>
                          <option [ngValue]="0">False</option>
                        </select></p>
                        <p><select [(ngModel)]="proposition3.is_correct_answer" [ngModelOptions]="{ standalone: true }" (ngModelChange)="updatePropositions(3)" required>
                          <option [ngValue]="1">True</option>
                          <option [ngValue]="0">False</option>
                        </select></p>
                      </td>
                      
                    </tbody>
                  </table>
                </td>
                <td>
                  <div >
                    <button class="btn btn-info btn-sm btn-square rounded-pill"  >
                      <span class="btn-icon icofont-ui-add" (click)=" addQuestionWithPropositions()"></span>
                    </button>
                    
                  </div>
                </td>

              </tr>




            </tbody>
          </table>
          

    </div>
  
  
   </div>
  

</div>

